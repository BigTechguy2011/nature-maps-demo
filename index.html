<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MyNatureCheck • Nearby Nature Map</title>
  <!-- Main stylesheet -->
  <link rel="stylesheet" href="styles.css" />
  <!-- Simple chatbot script -->
  <script defer src="chatbot.js"></script>
  <script>
    // === CONFIG ===
    // Replace with your restricted Google Maps Embed API key
    // Replace this with your actual Google Maps Embed API key
    const API_KEY = "AIzaSyAZH3QAhMlOd6WCggz2V6dkyLe_rzgeQmU";
    const DEFAULT_CENTER = { lat: 37.8977, lng: -122.2452 };
    const DEFAULT_ZOOM = 12;

    window.addEventListener("DOMContentLoaded", () => {
      const frame = document.getElementById("mapframe");
      const mapTypeSelect = document.getElementById("maptype");
      const btnDefault = document.getElementById("btnDefault");
      const btnSearch = document.getElementById("btnSearch");
      const queryInput = document.getElementById("query");
      const chips = document.querySelectorAll(".chip");

      function setView(maptype = "roadmap") {
        const url = new URL("https://www.google.com/maps/embed/v1/view");
        url.searchParams.set("key", API_KEY);
        url.searchParams.set("center", `${DEFAULT_CENTER.lat},${DEFAULT_CENTER.lng}`);
        url.searchParams.set("zoom", DEFAULT_ZOOM);
        url.searchParams.set("maptype", maptype);
        frame.src = url.toString();
      }

      function setSearch(query) {
        const url = new URL("https://www.google.com/maps/embed/v1/search");
        url.searchParams.set("key", API_KEY);
        url.searchParams.set("q", query);
        // bias search near default center
        url.searchParams.set("center", `${DEFAULT_CENTER.lat},${DEFAULT_CENTER.lng}`);
        url.searchParams.set("zoom", DEFAULT_ZOOM);
        frame.src = url.toString();
      }

      // Initialize default view
      setView("roadmap");

      // Change map type
      mapTypeSelect.addEventListener("change", () => {
        setView(mapTypeSelect.value);
      });
      // Reset to default view
      btnDefault.addEventListener("click", () => {
        setView(mapTypeSelect.value);
      });
      // Search using input
      btnSearch.addEventListener("click", () => {
        const q = queryInput.value.trim();
        if (q) setSearch(q);
      });
      // Quick search chips
      chips.forEach((chip) => {
        chip.addEventListener("click", () => {
          const q = chip.getAttribute("data-query");
          queryInput.value = q;
          setSearch(q);
        });
      });
    });
  </script>
</head>
<body>
  <header>
    <div class="leaf">
      <!-- You can replace this with your SVG logo -->
      🍃
    </div>
    <div>
      <h1>MyNatureCheck</h1>
      <div class="sub">Nearby Nature Map</div>
    </div>
  </header>
  <div class="panel">
    <div class="controls">
      <label for="maptype">Map type</label>
      <select id="maptype">
        <option value="roadmap">Roadmap</option>
        <option value="satellite">Satellite</option>
        <option value="hybrid">Hybrid</option>
      </select>
    </div>
    <div class="controls">
      <label for="query">Search</label>
      <div class="row">
        <input id="query" type="text" placeholder="e.g. parks near me" />
        <button id="btnSearch">Search</button>
      </div>
    </div>
    <div class="controls">
      <label>Quick search</label>
      <div class="buttons">
        <div class="chip" data-query="parks near me">Parks</div>
        <div class="chip" data-query="trails near me">Trails</div>
        <div class="chip" data-query="nature reserve near me">Nature Reserves</div>
        <div class="chip" data-query="botanical garden near me">Botanical Gardens</div>
      </div>
    </div>
    <div class="controls">
      <button id="btnDefault">Default View</button>
      <div class="hint">Default view recenters the map on the demo coordinates.</div>
    </div>
  </div>
  <div class="map-wrap">
    <iframe id="mapframe" allowfullscreen loading="lazy"></iframe>
  </div>
  <footer>
    © MyNatureCheck • Demo map for prototyping
  </footer>
  <!-- Chatbot toggle button -->
  <button id="chat-toggle" class="chat-toggle">💬</button>
  <!-- Chatbot container -->
  <div id="chat-container" class="chat-container hidden">
    <div id="chat-messages" class="chat-messages"></div>
    <form id="chat-form" class="chat-form">
      <input id="chat-input" type="text" placeholder="Ask about nature..." autocomplete="off" />
      <button type="submit">Send</button>
    </form>
  </div>
</body>
</html>